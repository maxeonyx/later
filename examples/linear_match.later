# Pattern match on linear type - all branches must consume
let resource = open("data.txt")
let result = read-result(resource)

match result {
    Ok(data) => {
        data.resource | close
        "consumed"
    }
    Err(e) => {
        e.resource | close
        "consumed"
    }
}
