// Handler aborts (doesn't resume): linear values must be cleaned up

effect abort(reason: String): Never

fn work() {
    let file = open("test.txt")
    defer { 
        file | close
        print("cleanup ran")
    }
    
    abort("reason")
    print("never reached")
}

// Handler with Drop resume - can choose not to resume
handle abort(reason, resume: Drop) {
    print("aborted: {reason}")
    // Don't call resume - cleanup still runs via defer
}
work()
