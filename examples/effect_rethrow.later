// Effect rethrow - catch and rethrow with modification

effect fail(msg: String): Never

fn inner() {
    fail("inner error")
}

fn middle() {
    handle fail(msg, resume: Drop) {
        fail("wrapped: {msg}")  // rethrow to outer handler
    }
    inner()
}

handle fail(msg, resume: Drop) {
    print("caught: {msg}")
}
middle()
