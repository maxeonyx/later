# 100 defers in sequence
fn setup-defers(n) {
    if n > 0 {
        defer { 
            # Each defer contributes to count
        }
        setup-defers(n - 1)
    }
}

let mut count = 0
{
    let mut i = 0
    loop {
        if i >= 100 { break }
        defer { count = count + 1 }
        i = i + 1
    }
}
print("{count} cleanups ran")
